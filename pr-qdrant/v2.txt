services:
  qdrant:
    image: qdrant/qdrant:latest
    restart: always
    container_name: qdrant
    ports:
      - "6333:6333"  # HTTP API
      - "6334:6334"  # gRPC API
    environment:
      QDRANT__TELEMETRY_DISABLED: true
      
      # ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: RAM –≤–º–µ—Å—Ç–æ –¥–∏—Å–∫–∞
      QDRANT__STORAGE__ON_DISK_PAYLOAD: false
      QDRANT__STORAGE__ON_DISK_VECTORS: false

      # üîß –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä—ã: –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
      QDRANT__OPTIMIZERS__INDEXING_THRESHOLD: 1      # –∏–Ω–¥–µ–∫—Å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ 1 —Ç–æ—á–∫–∏
      QDRANT__OPTIMIZERS__FULL_SCAN_THRESHOLD: 10    # —Ä–∞–∑—Ä–µ—à–∏—Ç—å scroll –±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ –¥–æ 10 —Ç–æ—á–µ–∫
      QDRANT__OPTIMIZERS__DELETED_THRESHOLD: 0.1
      QDRANT__OPTIMIZERS__VACUUM_MIN_VECTOR_NUMBER: 100

      # üß† HNSW: –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π, RAM-only, –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
      QDRANT__HNSW__M: 16                     # –º–µ–Ω—å—à–µ ‚Üí –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏, –±—ã—Å—Ç—Ä–µ–µ
      QDRANT__HNSW__EF_CONSTRUCT: 100
      QDRANT__HNSW__ON_DISK: false
      QDRANT__HNSW__FULL_SCAN_THRESHOLD: 10

      # üö´ –û—Ç–∫–ª—é—á–∞–µ–º –∏–∑–ª–∏—à–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
      QDRANT__WAL__WAL_CAPACITY_MB: 32
      QDRANT__STORAGE__STRICT_MODE: false
    volumes:
      - qdrant_storage:/qdrant/storage

volumes:
  qdrant_storage: